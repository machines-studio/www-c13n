{"version":3,"file":"Projects-DYDSv4Uh.js","sources":["../../../node_modules/@internet/raf/lib/raf.js","../../../src/components/Projects.js"],"sourcesContent":["'use strict'\n\n/**\n * Core of the raf package\n * @module raf\n * @type {Object}\n * @example\n * import { raf } from '@internet/raf'\n *\n * function tick (dt) {\n *  console.log('called on new frame')\n * }\n *\n * raf.add(tick)\n */\n\nvar root = typeof window === 'undefined' ? global : window\nvar _observers = []\nvar _afterObservers = []\nvar _beforeObservers = []\nvar _rafHandler = null\nvar _lastDate = null\nvar _once = false\nvar _complex = false\n\n/**\n * Time elapsed between the previous and the current frame\n * @type {number}\n * @static\n * @category properties\n */\nvar time\n\n/**\n * Current delta time\n * @type {number}\n * @static\n * @category properties\n */\nvar dt\n\nfunction _frame (timestamp) {\n  // compute deltatime and time\n  if (timestamp === void 0) timestamp = 0\n  if (_lastDate === null) _lastDate = timestamp\n  dt = timestamp - _lastDate\n  time += dt\n  _lastDate = timestamp\n  // we request the frame now, allowing to cancel it from observers\n  _rafHandler = _once ? null : root.requestAnimationFrame(_frame)\n  if (_once) _once = false\n  // call all observers\n  var i\n  if (_complex) {\n    for (i = 0; i < _beforeObservers.length; i++) _beforeObservers[i](dt)\n    for (i = 0; i < _observers.length; i++) _observers[i](dt)\n    for (i = 0; i < _afterObservers.length; i++) _afterObservers[i](dt)\n  } else {\n    for (i = 0; i < _observers.length; i++) _observers[i](dt)\n  }\n}\n\nfunction _swapRunner () {\n  _complex = !!(_afterObservers.length > 0 || _beforeObservers.length > 0)\n}\n\nfunction _addObserver (arr, fn, prepend) {\n  if (!fn || !arr) return false\n  if (~arr.indexOf(fn)) return false\n  prepend = !!prepend\n  prepend ? arr.unshift(fn) : arr.push(fn)\n  return true\n}\n\nfunction _removeObserver (arr, fn) {\n  if (!fn) return false\n  var index = arr.indexOf(fn)\n  if (!~index) return false\n  arr.splice(index, 1)\n  return !!(arr.length === 0)\n}\n\n/**\n * Add a function for execution at the beginning of the raf call\n * Calling addBefore will not start the raf.\n * @param {function} fn Function to be called at the start of the raf\n * @param {function} [prepend=false] Prepend the function to the beginning of the functions list\n * @static\n * @category methods\n */\nfunction addBefore (fn, prepend) {\n  _addObserver(_beforeObservers, fn, prepend) && _swapRunner()\n}\n\n/**\n * Add a function for execution at the end of the raf call\n * Calling addAfter will not start the raf.\n * @param {function} fn Function to be called at the end of the raf\n * @param {function} [prepend=false] Prepend the function to the beginning of the functions list\n * @static\n * @category methods\n */\nfunction addAfter (fn, prepend) {\n  _addObserver(_afterObservers, fn, prepend) && _swapRunner()\n}\n\n/**\n * Add a function for execution on each frame\n * @param {function} fn Function to be called\n * @param {function} [prepend=false] Prepend the function to the beginning of the functions list\n * @static\n * @category methods\n */\nfunction add (fn, prepend) {\n  _addObserver(_observers, fn, prepend) && start()\n}\n\n/**\n * Remove a function for execution at the beginning of the raf call\n * Calling removeBefore will not stop the raf.\n * @param {function} fn Function to remove from the raf\n * @static\n * @category methods\n */\nfunction removeBefore (fn) {\n  _removeObserver(_beforeObservers, fn) && _swapRunner()\n}\n\n/**\n * Remove a function for execution at the end of the raf call\n * Calling removeAfter will not stop the raf.\n * @param {function} fn Function to remove from the raf\n * @param {function} [prepend=false] Prepend the function to the beginning of the functions list\n * @static\n * @category methods\n */\nfunction removeAfter (fn, prepend) {\n  _removeObserver(_afterObservers, fn) && _swapRunner()\n}\n\n/**\n * Remove a function for execution on each frame\n * @param {function} fn Function to remove from the raf\n * @static\n * @category methods\n */\nfunction remove (fn) {\n  _removeObserver(_observers, fn) && stop()\n}\n\n/**\n * Force start the raf. You usually don't need to use it.\n * @param {boolean} [instant=false] Directly make a raf call without waiting for the next frame (default false)\n * @static\n * @category methods\n */\nfunction start (instant) {\n  _once = false\n  if (_rafHandler) return\n  instant = !!instant\n  _lastDate = null\n  if (instant) _frame()\n  else _rafHandler = root.requestAnimationFrame(_frame)\n}\n\n/**\n * Request once the raf. Will not be executed if the raf is already running.\n * @static\n * @category methods\n */\nfunction requestOnce () {\n  if (_rafHandler) return\n  _once = true\n  _lastDate = null\n  _rafHandler = root.requestAnimationFrame(_frame)\n}\n\n/**\n * Force stop the raf. You usually don't need to use it.\n * @static\n * @category methods\n */\nfunction stop () {\n  if (!_rafHandler) return\n  root.cancelAnimationFrame(_rafHandler)\n  _rafHandler = null\n}\n\n/**\n * Remove all observers from the raf singleton and stop the raf if it's running. Reset time.\n * @static\n * @category methods\n */\nfunction dispose () {\n  stop()\n  _observers.length = 0\n  _afterObservers.length = 0\n  _beforeObservers.length = 0\n  _complex = false\n  _lastDate = null\n  time = 0\n  dt = 0\n}\n\nexport default {\n  add: add,\n  addAfter: addAfter,\n  addBefore: addBefore,\n  remove: remove,\n  removeAfter: removeAfter,\n  removeBefore: removeBefore,\n  start: start,\n  stop: stop,\n  time: time,\n  dt: dt,\n  requestOnce: requestOnce,\n  dispose: dispose\n}\n","import { raf } from '@internet/raf'\n\nexport const selector = '.projects'\n\nconst OFFY = 100\n\nexport function hydrate (element) {\n  const scroller = element.querySelector('.projects__items')\n\n  // Used to allow element to be scrolled its whole width\n  const spacer = document.createElement('div')\n  spacer.classList.add('projects-spacer')\n  element.insertAdjacentElement('afterend', spacer)\n\n  //\n  for (const nav of element.querySelectorAll('nav a[href^=\"#\"]')) {\n    nav.addEventListener('click', e => {\n      e.preventDefault()\n      const project = element.querySelector('#' + nav.href.split('#').pop())\n      scrollTo(project)\n    })\n  }\n\n  // Bind\n  raf.add(tick)\n  scroller.addEventListener('wheel', handleWheel)\n\n  return {\n    destroy: () => {\n      raf.remove(tick)\n    }\n  }\n\n  function tick (e) {\n    const y = document.documentElement.scrollTop\n    const offsetTop = spacer.offsetTop\n\n    // Scroll scroller\n    scroller.scrollLeft = y - offsetTop\n\n    // Adjust spacer height based on element width (images are lazyloaded)\n    spacer.style.height = OFFY + scroller.scrollWidth - element.clientWidth + element.clientHeight + 'px'\n\n    // Simulate a sticky position on element (CSS sticky does not allow the full wanted behavior)\n    element.style.position = 'fixed'\n    element.style.top = 0\n    element.style.transform = `translateY(${\n      scroller.scrollLeft + scroller.clientWidth < scroller.scrollWidth\n        ? Math.max(offsetTop - y, OFFY)\n        : offsetTop - y + parseInt(spacer.style.height) - element.clientHeight\n    }px)`\n  }\n\n  function scrollTo (project) {\n    document.documentElement.scrollTop = spacer.offsetTop + project.offsetLeft\n  }\n\n  function handleWheel (e) {\n    if (Math.abs(e.deltaX) < Math.abs(e.deltaY)) return\n    e.preventDefault()\n  }\n}\n"],"names":["root","_observers","_afterObservers","_beforeObservers","_rafHandler","_lastDate","_once","_complex","time","dt","_frame","timestamp","i","_swapRunner","_addObserver","arr","fn","prepend","_removeObserver","index","addBefore","addAfter","add","start","removeBefore","removeAfter","remove","stop","instant","requestOnce","dispose","raf","selector","OFFY","hydrate","element","scroller","spacer","nav","e","project","scrollTo","tick","handleWheel","y","offsetTop"],"mappings":"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","x_google_ignoreList":[0]}